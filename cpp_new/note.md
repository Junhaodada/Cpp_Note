# C++新经典笔记



> 《c++新经典》笔记

## 第14章 类

### 14.1　成员函数、对象复制与私有成员

类包括成员变量和成员函数。

注意：class中成员默认private，struct中默认public

类允许被重定义。在多个文件中重复声明头文件。

对象复制可以使用： = () {} ={}。

类的私有成员变量和私有成员函数都只能在类的成员函数内调用，外界是无法直接调用的。

### 14.2　构造函数详解、explicit与初始化列表

区分成员函数的定义、声明、实现。

构造函数的目的（存在的意义）就是初始化类对象的数据成员（成员变量）。

执行复制对象操作时调用拷贝构造函数而非构造函数。

**默认参数**

在具有多个参数的函数中指定参数默认值时，默认参数都必须出现在非默认参数的右侧，一旦开始为某个参数指定默认值，则它右侧的所有参数都必须指定默认值。

**隐式转换和explicit**

当类出现单参数构造函数时，以下写法不报错。因为单参数构造函数执行了隐式类型转换。

```cpp
class Time {
    Time(int var);
    explicit Time(int var); //显示初始化
}
Time::Time(int var){
    ...
}
Time t = new Time(1);
Time t = new Time｛1｝;
Time t(1);
Time t{1}
// 隐式初始化(构造并初始化)
Timer t = 1;
Time t = ｛1｝；
Timer t = (1,2,3,4,5);
void func(1); // void func(Timer t)
```

如果构造函数声明中带有explicit（显式），则这个构造函数只能用于初始化和显式类型转换。

**构造函数列表初始化**

优点：初始化列表的执行是在函数体执行之前就执行了的。对于类类型的成员变量，使用初始化列表的方式初始化比使用赋值语句初始化效率更高（因为少调用了一次甚至几次该成员变量相关类的各种特殊成员函数，如构造函数等）。

```cpp
Time::Time(int tmphour,int tmpminute, int tmpsec)： Hour(tmphour), Minute(tmpminute), Sec(tmpsec){
    ...
}
```

注意初始化顺序是按类成员定义顺序执行的。

### 14.3　inline、const、mutable、this与static

**inline**

直接在类在定义的成员函数会被当作inline函数来处理。

内联函数只是对编译器的建议，能不能inline成功，依旧取决于编译器，所以，成员函数的定义体尽量写得简单，以增加被inline成功的概率。

**成员函数末尾const**

这个成员函数末尾的const起什么作用呢？告诉系统，这个成员函数不会修改该对象里面的任何成员变量的值等，也就是说，这个成员函数不会修改类对象的任何状态。

```cpp

```
